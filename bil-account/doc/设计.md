[TOC]
# 设计问题

## 如何保证同一数据只转账一次?
场景
- 同一笔单号要转两次帐：1.转到中间户 2. 从中间户转到最终账户

解决方案
- 通过`account_command`表保证幂等,`command_trade_no`和`command_type`唯一键保证


## 单号
- 账号生成规则：对账号+账户类型
- 订单号生成规则：单据类型+时间

## 分库分表

## 不用事务如何保证一致性
场景
- 一单分库分表，事务肯定没法用，怎么办呢?


## 多级账号怎么玩?
